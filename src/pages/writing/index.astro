---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const writing = await getCollection('writing', ({ data }) =>
  data.type === 'post' && data.published
);
const sorted = writing.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Writing - Simon Bukin" description="Thoughts, tutorials, and quick tips">
    <div class="max-w-2xl px-6 py-12 md:py-16">
      <h1 class="text-3xl font-bold mb-8" style="color: var(--text-primary);">Writing</h1>

      <ul class="space-y-6">
        {sorted.map((item) => (
          <li>
            <a href={`/writing/${item.slug}`} class="group block">
              <span class="font-semibold transition-colors" style="color: var(--text-secondary);">{item.data.title}</span>
              <p class="mt-1 text-sm" style="color: var(--text-tertiary);">{item.data.description}</p>
              <div class="flex items-center gap-3 mt-2 text-sm" style="color: var(--text-tertiary);">
                <time>
                  {item.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
                </time>
                {item.data.tags && (
                  <>
                    <span style="color: var(--border-primary);">Â·</span>
                    <div class="flex gap-2">
                      {item.data.tags.map((tag: string) => (
                        <span class="text-xs" style="color: var(--text-tertiary);">{tag}</span>
                      ))}
                    </div>
                  </>
                )}
              </div>
            </a>
          </li>
        ))}
      </ul>
    </div>
  </BaseLayout>